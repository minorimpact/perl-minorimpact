<link rel="stylesheet" type="text/css" href="/minorimpact.css">
<link rel="stylesheet" type="text/css" href="/jquery-ui-1.11.4/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="/jquery-ui-1.11.4/jquery-ui.structure.css">
<link rel="stylesheet" type="text/css" href="/jquery-ui-1.11.4/jquery-ui.theme.css">
<script src="/jquery-2.1.4.js"></script>
<script src="/jquery-ui-1.11.4/jquery-ui.js"></script>

<script>
    // Duplicates the row the control is in and marks it so it
    // won't get duplicated again.  Used to dynamically add array fields
    // to forms.
    function duplicateRow(o) {
        if (\$(o).data('duped') == 1) {
            return;
        }
        var \$tr = \$(o).closest("tr");
        var \$clone = \$tr.clone();
        \$tr.after(\$clone);
        \$(\$clone).find('input').each(function () {
                var re = /_(\d+)\$/;
                //var new_name = this.name.replace(re, 
                var ids = this.name.match(re);
                var id = ids[1];
                var new_name = this.name.replace('_' + id, '_' + (parseInt(id) + 1));
                this.setAtribute("name", new_name);
            });
        \$(o).data("duped", 1);
    }   
</script>
